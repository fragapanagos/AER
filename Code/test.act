// Defines processes used in testing
import "lib/globals.act";

export
defproc active_handshaker(globals g; bool i, o) {
    // a simple active handshaker
    prs <g.Vdd,g.GND> {
        ~g.sReset & ~i -> o+
        g.pReset  | i  -> o-
    }
}

export
defproc active_low_handshaker(globals g; bool _i, _o) {
    // a simple active low handshaker
    prs <g.Vdd,g.GND> {
        g._sReset & _i   -> _o-
        ~g._pReset | ~_i -> _o+
    }
}

export
defproc passive_handshaker(globals g; bool i, o) {
    // a simple passive handshaker
    prs <g.Vdd,g.GND> {
        i  => o+ // just a wire with delay
    }
}

export
defproc TEST_TEST(globals g) {
    // tests active and passive handshakers
    active_handshaker a(g,,);
    passive_handshaker p(g,,);
    
    a.i = p.o;
    a.o = p.i;
}
