// Tests the serial tree AER system supporting data
import "serial_aer.act";

globals g;

template <pint N, NN>
defproc AERV_NRN_FULL(bool i[NN], o[NN]; c1of<N> d[NN]) {
    prs {
        (: nn : NN :
            i[nn] & (& : n : N : ~d[nn].d[n]) => o[nn]+
        )
    }
}

pint M_AEXT=5;
pint M_AERV=3;
pint N=2;
pint NN_AEXT=32;
pint NN_AERV=8;

active_handshaker<NN_AEXT> x(g,,);
AERV_NRN_FULL<N, NN_AERV> y(,,);
aer::AER_DATA<M_AEXT, M_AERV, N, NN_AEXT, NN_AERV> aer(g, x.o, x.i, y.o, y.i, y.d);
