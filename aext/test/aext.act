// tests the serial aer transmitter

/*CMOS implementable version-------------------------------------------------*/
import "aer/aext/aext.act";
import "aer/interface/interface.act";
pint M=3;
pint N=2;
pint NN=8; // NN=N^M
::aer::globals g;
::aer::SOURCE_random_a1of1 src[NN];
::aer::AEXT<M, N, NN> aext(g,,,,,);
::aer::interface::OUT_a1ofN<N> out(g, aext.pp, aext.pi, aext.p,);
::aer::interface::DESERIAL_RING<M, N> deserial(g, out.y,);
::aer::SINK_eMx1ofN<M, N> snk(g, deserial.y);
(; nn : NN :
    src[nn].g = g;
    src[nn].d.a = aext.xo[nn];
)
prs<g.Vdd, g.GND> {
    (: nn : NN :
        src[nn].d.d => aext._xp[nn]-
    )
}

/*reference version----------------------------------------------------------*/
// import "aer/aext/ref_aext.act";
// import "aer/interface/ref_interface.act";
// pint M=3;
// pint N=2;
// pint NN=8; // NN=N^M
// ::aer::globals g;
// ::aer::active_handshaker<NN> a(g,,);
// ::aer::AEXT<M, N, NN> aext(g, a.o, a.i,,,);
// ::aer::interface::OUT_a1ofN<N> out(g, aext.pp, aext.pi, aext.p,);
// ::aer::interface::DESERIAL_RING<M, N> deserial(g, out.y,);
// ::aer::SINK_eMx1ofN<M, N> snk(g, deserial.y);
