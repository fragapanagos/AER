channel eMx1of4 2 src
channel eMx1of2 4 snk

loop-injectfile src prs/eMx1of4_to_eMx1of2.in
loop-expectfile snk prs/eMx1of4_to_eMx1of2.out
source r.scr

set_principal src.m[0].d[0]
set_principal src.m[0].d[1]
set_principal src.m[0].d[2]
set_principal src.m[0].d[3]
set_principal src.m[1].d[0]
set_principal src.m[1].d[1]
set_principal src.m[1].d[2]
set_principal src.m[1].d[3]

set_principal snk.m[0].d[0]
set_principal snk.m[0].d[1]
set_principal snk.m[1].d[0]
set_principal snk.m[1].d[1]
set_principal snk.m[2].d[0]
set_principal snk.m[2].d[1]
set_principal snk.m[3].d[0]
set_principal snk.m[3].d[1]

vector x0 :1ofN 4 src.m[0].d[0] src.m[0].d[1] src.m[0].d[2] src.m[0].d[3]
vector x1 :1ofN 4 src.m[1].d[0] src.m[1].d[1] src.m[1].d[2] src.m[1].d[3]
vector y0 :1ofN 2 snk.m[0].d[0] snk.m[0].d[1]
vector y1 :1ofN 2 snk.m[1].d[0] snk.m[1].d[1]
vector y2 :1ofN 2 snk.m[2].d[0] snk.m[2].d[1]
vector y3 :1ofN 2 snk.m[3].d[0] snk.m[3].d[1]
vwatch x0
vwatch x1
vwatch y0
vwatch y1
vwatch y2
vwatch y3
