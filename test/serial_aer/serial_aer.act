// Tests the serial tree AER system

/*CMOS implementable version-------------------------------------------------*/
import "serial_aer.act";
globals g;
pint M=3;
pint N=2;
pint NN=8; // NN=N^M
SOURCE_random_a1of1 src[NN];
passive_handshaker<NN> y(g,,);
aer::AER_NODATA<M, N, NN> aer(g,,, y.o, y.i);

(; nn : NN :
    src[nn].g = g;
    src[nn].d.a = aer.xo[nn];
)
prs<g.Vdd, g.GND> {
    (: nn : NN :
        src[nn].d.d => aer._xp[nn]-
    )
}

/*reference version----------------------------------------------------------*/
// import "ref_serial_aer.act";
// 
// globals g;
// 
// pint M=3;
// pint N=2;
// pint NN=8;
// 
// active_handshaker<NN> x(g,,);
// passive_handshaker<NN> y(g,,);
// aer::AER_NODATA<M, N, NN> aer(g, x.o, x.i, y.o, y.i);
